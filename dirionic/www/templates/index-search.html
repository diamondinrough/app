<ion-view title="Search All">
  <ion-nav-buttons side="right">
    <button class="button button-icon icon ion-ios-pricetag" ng-click="showTags()"></button>
  </ion-nav-buttons>
  <ion-content>
    <ion-refresher pulling-text="Reload searches" on-refresh="reload()"></ion-refresher>
    <div>
      <label class="item item-input">
        <i class="icon ion-ios-search-strong" style="margin-right: 10px;" on-touch="loadSearches()"></i>
        <input type="search" placeholder="Search" ng-model="search.text">
        <a ng-if="search.text != ''" on-touch="search.text=''">
          <i class="icon ion-ios-close" style="margin-right: 12px;"></i>
        </a>
      </label>
    </div>
    <ion-list>  
      <ion-item ng-repeat="item in items">
        <div ng-if="item.type == 'article'">
          <div>
            <p class="item-type">Article</p>
            <a class="item-view button icon-right ion-chevron-right button-clear button-dark" href="#/app/index/article/{{item.id}}">View</a>
          </div>
          <div style="clear: both;"></div>
          <ul>
            <li class="tag" ng-repeat="tag in item.tags" style="background-color: {{tag.color}}">
              {{tag.name}}
            </li>
          </ul>
          <div class="item-text-wrap" style="margin-top: 7px; margin-bottom: 5px;">
            <h2 class="item-title" ng-bind-html="article.title"></h2>
          </div>
          <div>
            <p class="item-date">{{item.dt_created}}</p>
            <p class="item-views icon ion-eye">{{item.views}}</p>
          </div>
          <div style="clear: both;"></div>
          <div class="item-img-container">
            <img class="item-img" ng-src="{{item.image}}">
          </div>
          <div class="item-text-wrap">
            <p class="item-summary" ng-bind-html="item.summary"></p>
          </div>
        </div>
        <div ng-if="item.type == 'video'">
          <div>
            <p class="item-type">Video</p>
            <a class="item-view button icon-right ion-chevron-right button-clear button-dark" href="#/app/index/video/{{item.id}}">View
            </a>
          </div>
          <div style="clear: both;"></div>
          <ul>
            <li class="tag" ng-repeat="tag in item.tags" style="background-color: {{tag.color}}">
              {{tag.name}}
            </li>
          </ul>
          <div class="item-text-wrap" style="margin-top: 7px; margin-bottom: 5px;">
            <h2 class="item-title" ng-bind-html="item.title"></h2>
          </div>
          <div>
            <p class="item-date">{{item.dt_created}}</p>
            <p class="item-views icon ion-eye">{{item.views}}</p>
          </div>
          <div style="clear: both;"></div>
          <div class="item-img-container">
            <img class="item-img" ng-src="https://img.youtube.com/vi/{{item.videoid}}/0.jpg" alt="thumbnail">
          </div>
          <div class="item-text-wrap">
            <p class="item-summary" ng-bind-html="item.summary"></p>
          </div>
        </div>
        <div ng-if="item.type == 'resource'">
          <div>
            <p class="item-type">Resource</p>
            <a class="item-view button icon-right ion-chevron-right button-clear button-dark" href="#/app/index/resource/{{item.id}}">View</a>
          </div>
          <div style="clear: both;"></div>
          <ul>
            <li class="tag" ng-repeat="tag in item.tags" style="background-color: {{tag.color}}">
              {{tag.name}}
            </li>
          </ul>
          <div class="resource-container">
            <div class="resource-type">
              {{item.filetype}}
            </div>
            <div class="resource-content">
              <div class="item-text-wrap" style="margin-top: 7px; margin-bottom: 5px;">
                <h2 class="item-title" ng-bind-html="item.title"></h2>
              </div>
              <div class="item-text-wrap">
                <p class="item-summary" ng-bind-html="item.summary"></p>
              </div>
            </div>
          </div>
          <div style="clear: both;"></div>
          <div>
            <p class="item-date">{{item.dt_created}}</p>
            <p class="item-downloads icon ion-arrow-down-a">{{item.downloads}}</p>
            <p class="item-views icon ion-eye">{{item.views}}</p>
          </div>
          <div style="clear: both;"></div>
        </div>
      </ion-item>
    </ion-list>
    <ion-infinite-scroll ng-if="moreitems" on-infinite="loadMore()"></ion-infinite-scroll>
  </ion-content>
</ion-view>